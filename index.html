<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake Pro üêç</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  height:100vh;
  background:radial-gradient(circle,#020617,#000);
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:Segoe UI,system-ui;
  color:#e5e7eb;
}
#ui{
  width:420px;
  background:#020617;
  border:1px solid #1f2937;
  border-radius:16px;
  padding:16px;
  box-shadow:0 20px 40px rgba(0,0,0,.6);
  text-align:center;
}
.blur{filter:blur(6px)}

canvas{
  background:#020617;
  border-radius:12px;
  border:2px solid #22c55e;
}

button,select{
  background:#020617;
  color:white;
  border:1px solid #1f2937;
  border-radius:10px;
  padding:6px 12px;
  margin:4px;
  cursor:pointer;
}

/* MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.7);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:999;
}
.hidden{display:none}

.modal-card{
  background:#020617;
  border:1px solid #1f2937;
  border-radius:18px;
  padding:30px;
  width:300px;
  text-align:center;
  animation:pop .4s ease;
}
@keyframes pop{
  from{transform:scale(.6);opacity:0}
  to{transform:scale(1);opacity:1}
}
.modal-card h1{
  font-size:48px;
  color:#22c55e;
}
</style>
</head>

<body>

<div id="ui">
  <h2>üêç Snake Pro</h2>
  <p>Score: <span id="score">0</span> | Best: <span id="best">0</span></p>

  <select id="skin">
    <option value="green">Green</option>
    <option value="blue">Neon Blue</option>
    <option value="fire">Fire üî•</option>
    <option value="galaxy">Galaxy üåå</option>
  </select>

  <div>
    <button onclick="start()">‚ñ∂ Start</button>
    <button onclick="pause()">‚è∏ Pause</button>
  </div>

  <canvas id="canvas" width="380" height="380"></canvas>
  <p style="opacity:.7">Use Arrow Keys</p>
</div>

<!-- GAME OVER MODAL -->
<div id="gameOverModal" class="modal hidden">
  <div class="modal-card">
    <h2>Game Over</h2>
    <p>Your Final Score</p>
    <h1 id="finalScore">0</h1>
    <button onclick="start()">Play Again</button>
    <button onclick="closeModal()">Close</button>
  </div>
</div>

<!-- SOUNDS -->
<audio id="eatSound">
  <source src="Untitled video - Made with Clipchamp.m4a">
</audio>

<audio id="failSound">
  <source src="Untitled video2 - Made with Clipchamp.m4a">
</audio>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
const box=20;
const cells=canvas.width/box;

const scoreEl=document.getElementById("score");
const bestEl=document.getElementById("best");
const skinSel=document.getElementById("skin");
const modal=document.getElementById("gameOverModal");
const finalScoreEl=document.getElementById("finalScore");
const ui=document.getElementById("ui");

const eatSound=document.getElementById("eatSound");
const failSound=document.getElementById("failSound");

let snake,food,dir,game,paused=false;
let score=0,particles=[];
let best=localStorage.getItem("snakeBest")||0;
bestEl.textContent=best;

const skins={
  green:{head:"#86efac",body:"#22c55e"},
  blue:{head:"#7dd3fc",body:"#0ea5e9"},
  fire:{head:"#fde047",body:"#f97316"},
  galaxy:{head:"#e879f9",body:"#8b5cf6"}
};

function reset(){
  snake=[{x:10,y:10},{x:9,y:10},{x:8,y:10}];
  food=spawnFood();
  dir={x:1,y:0};
  score=0;
  particles=[];
  scoreEl.textContent=0;
}
reset();

document.addEventListener("keydown",e=>{
  if(e.key==="ArrowLeft"&&dir.x!==1)dir={x:-1,y:0};
  if(e.key==="ArrowRight"&&dir.x!==-1)dir={x:1,y:0};
  if(e.key==="ArrowUp"&&dir.y!==1)dir={x:0,y:-1};
  if(e.key==="ArrowDown"&&dir.y!==-1)dir={x:0,y:1};
});

function start(){
  clearInterval(game);
  closeModal();
  reset();
  game=setInterval(update,110);
}
function pause(){paused=!paused}

function spawnFood(){
  return{x:Math.floor(Math.random()*cells),y:Math.floor(Math.random()*cells)}
}

function spawnParticles(x,y,color,count){
  for(let i=0;i<count;i++){
    particles.push({
      x:x+box/2,y:y+box/2,
      vx:(Math.random()-.5)*4,
      vy:(Math.random()-.5)*4,
      life:30,color
    });
  }
}

function updateParticles(){
  particles.forEach(p=>{
    p.x+=p.vx;p.y+=p.vy;p.life--;
  });
  particles=particles.filter(p=>p.life>0);
}

function update(){
  if(paused)return;

  let head={...snake[0]};
  head.x+=dir.x; head.y+=dir.y;

  if(
    head.x<0||head.y<0||
    head.x>=cells||head.y>=cells||
    snake.some(s=>s.x===head.x&&s.y===head.y)
  ){
    gameOver(); return;
  }

  snake.unshift(head);

  if(head.x===food.x&&head.y===food.y){
    score++;
    scoreEl.textContent=score;
    eatSound.currentTime=0;
    eatSound.play();
    spawnParticles(food.x*box,food.y*box,"#22c55e",20);
    food=spawnFood();
  }else snake.pop();

  updateParticles();
  draw();
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle="#ef4444";
  ctx.fillRect(food.x*box,food.y*box,box,box);

  const skin=skins[skinSel.value];
  snake.forEach((s,i)=>{
    ctx.fillStyle=i===0?skin.head:skin.body;
    ctx.shadowColor=skin.body;
    ctx.shadowBlur=10;
    ctx.fillRect(s.x*box,s.y*box,box,box);
  });
  ctx.shadowBlur=0;

  particles.forEach(p=>{
    ctx.globalAlpha=p.life/30;
    ctx.fillStyle=p.color;
    ctx.beginPath();
    ctx.arc(p.x,p.y,3,0,Math.PI*2);
    ctx.fill();
    ctx.globalAlpha=1;
  });
}

function gameOver(){
  clearInterval(game);
  failSound.currentTime=0;
  failSound.play();

  if(score>best){
    best=score;
    localStorage.setItem("snakeBest",best);
    bestEl.textContent=best;
  }

  finalScoreEl.textContent=score;
  modal.classList.remove("hidden");
  ui.classList.add("blur");
}

function closeModal(){
  modal.classList.add("hidden");
  ui.classList.remove("blur");
}
</script>

</body>
</html>
